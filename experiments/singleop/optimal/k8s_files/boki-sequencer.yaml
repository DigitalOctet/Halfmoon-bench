apiVersion: v1
kind: Deployment
metadata:
  name: boki-sequencer-deployment
  labels:
    app: boki-sequencer
spec:
  replicas: 3
  selector:
    matchLabels:
      app: boki-sequencer
  template:
    metadata:
      labels:
        app: boki-sequencer
    spec:
      containers:
      - name: boki-sequencer
        image: shengqipku/halfmoon:sosp-ae
        command: ["/boki/sequencer"]
        args:
          - --zookeeper_host=zookeeper:2181
          - --listen_iface=eth0
          - --num_io_workers=2
          - --io_uring_entries=2048
          - --io_uring_fd_slots=4096
          - --slog_global_cut_interval_us=300
          # - --v=1
        env:
          - name: FAAS_NODE_ID
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
        restartPolicy: Always